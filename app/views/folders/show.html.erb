<section class="section">
  <div class="container">
    <% if @folder.root? %>
      <h3 class="subtitle is-6">Projet</h3>
      <%= tag.h2 @project.root_folder.name, class: "title is-2" %>
      <%= render 'projects/controls', project: @project %>
      <hr />
    <% else %>
      <%= render 'breadcrumbs' %>
    <% end %>

    <div class="content">
      <% if @folder.has_content? %>
        <%= render 'folder_contents' %>
      <% end %>
    </div>

    <% if allow_action? :subfolders, :create %>
      <hr />

      <div class="content">
        <h3 class="title is-4">
          Cr√©er un nouveau dossier dans le dossier <em><%= @folder.name %></em>
        </h3>

        <%= render 'folder_creation_form' %>
      </div>

      <hr />
    <% end %>

    <% if allow_action? :documents, :create %>
      <div class="content">
        <h4 class="title is-4">Ajouter de nouveaux documents au dossier <em><%= @folder.name %></em></h4>

        <%= form_with(model: @document, local: true) do |f| %>
          <%= f.hidden_field :folder_id, value: @folder.id %>
          <div class="field">
            <div class="control">
              <%= file_field_tag 'document[file]', multiple: true %>
            </div>
          </div>
        <% end %>
      </div>

      <div class="js-progress-component"></div>
    <% end %>
  </div>
</section
