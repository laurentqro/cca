<section class="section">
  <div class="container">
    <h2 class="title is-2">
      <%= @user.full_name %>
    </h2>

    <div class="field is-grouped">
      <p class="control">
        <% if allow_action?(:users, :edit, @user) %>
          <%= link_to "Editer", edit_user_url(@user), class: "button" %>
        <% end %>
      </p>

      <p class="control">
        <% if allow_action?(:users, :impersonate) %>
          <%= link_to "Se connecter en tant que #{@user.first_name}", impersonate_user_path(@user), method: :post, class: "button" %>
        <% end %>
      </p>
    </div>

    <table class="table">
      <tbody>
        <tr>
          <th>
            Statut du compte
          </th>
          <td>
            <%= @user.account_status %>
          </td>
        </tr>
        <tr>
          <th>
            Niveau d'acc√®s
          </th>
          <td>
            <%= t "activerecord.attributes.user.group.#{@user.group}" %>
          </td>
        </tr>
        <tr>
          <th>
            Email
          </th>
          <td>
            <%= @user.email %>
          </td>
        </tr>
        <tr>
          <th>
            Ville
          </th>
          <td>
            <%= @user.city %>
          </td>
        </tr>
        <tr>
          <th>
            Groupes
          </th>
          <td>
            <ul>
              <% @user.employments.each do |employment| %>
                <li><%= link_to employment.company.name, employment.company %></li>
              <% end %>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>

    <% if allow_action?(:users, :destroy, @user) %>
      <%= link_to "Supprimer", @user, method: :delete, data: { confirm: "Etes-vous sur de vouloir supprimer ce compte ?" }, class: "button is-danger" %>
    <% end %>
  </div>
</section
